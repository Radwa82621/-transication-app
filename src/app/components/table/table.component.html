<div class="card">
    <p-table [value]="customers" dataKey="name" [tableStyle]="{ 'min-width': '60rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 5rem"></th>
                <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
                <th pSortableColumn="id">Id <p-sortIcon field="id"></p-sortIcon></th>
                <th pSortableColumn="total_Payment">total Payment <p-sortIcon field="total_Payment"></p-sortIcon></th>
                <th pSortableColumn="number_of_transications ">number of transications <p-sortIcon field="number_of_transications"></p-sortIcon></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-customer let-expanded="expanded">
            <tr>
                <td>
                    <button type="button" pButton pRipple [pRowToggler]="customer" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                </td>
                <td>{{ customer.name}}</td>
                <td>{{ customer.id  }}</td>
                <td>{{ customer.total }}</td>
                <td>{{ customer.transications.length }}</td>
<td><button class="btn btn-lg btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"  (click)="viewChart(customer.transications) "> view Chart</button></td>
               
            </tr>

        </ng-template>
        <ng-template pTemplate="rowexpansion" let-customer>
            <tr>
                <td colspan="7">
                    <div class="p-3">
                        <p-table [value]="customer.transications" dataKey="id">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th pSortableColumn="store_name">store name <p-sortIcon field="store_name"></p-sortIcon></th>
                                    <th pSortableColumn="price">price <p-sortIcon field="price"></p-sortIcon></th>
                                    <th >payment method </th>
                                    <th>date</th>

                                    <th style="width: 4rem"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-transication>
                                <tr>
                                    <td>{{ transication.store_name }}</td>
                                    <td>{{ transication.price | currency: 'USD' }}</td>
                                    <td>{{ transication.payment_method }}</td>
                                    <td>{{ transication.date }}</td>
                                </tr>
                              
                            </ng-template>
                            
                        </p-table>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

  


  
  <!-- Modal -->
  <div class="modal fade"  id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
            <p class="h1"> chart</p>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="container">
                <div class="row">
                    <div class="col-12">

                        <ul class="nav nav-pills mb-3 d-flex justify-content-center mx-auto" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                              <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">payment method</button>
                            </li>
                            <li class="nav-item" role="presentation">
                              <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">tranication</button>
                            </li>
                           
                          </ul>
                          <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                                <div class="card flex justify-content-center">
                                    <p-chart type="pie" [data]="data" [options]="options"></p-chart>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">

                                <div class="card">
                                    <p-chart type="bar" [data]="basicData" [options]="basicOptions"></p-chart>
                                </div>

                            </div>
                          </div>


                       
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>



            <!-- <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
    <p-chart type="bar" [data]="basicData" [options]="basicOptions"></p-chart>
</div>
                    </div>
                </div>
            </div> -->
   